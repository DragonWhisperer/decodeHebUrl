<!DOCTYPE html>
<html>
    <head>
        <title>Decode Heb Url | קודד קישור מג'וברש לתווים עיבריים</title>
    </head>
    <body>

    <h1>Enter url:</h1>
    <div style="margin: 30px; width: 80%;">
        <input style="border: 2px solid #ccc!important; padding: 10px; padding-right: 0px; width: -webkit-fill-available; font-family: monospace;" type="text" id="input" 
        placeholder="Enter your url">
    </div>

    <h1>Hebrew output:</h1>

    <div style="border: 2px solid #ccc!important; margin: 30px; width:80%;">
        <p id="result" style="margin: 10px; font-family: monospace;">Results</p>
    </div>

    <h1>Remove safepage:</h1>

    <div style="border: 2px solid #ccc!important; margin: 30px; width:80%;">
        <p id="safepageRemoved" style="margin: 10px; font-family: monospace;">Results</p>
    </div>

    </body>
</html>

<style>
    h1 {
        /* font-family: cursive; */
        font-family: monospace;
    }
</style>

<script>
    function decodeHebUri(str) {
        return decodeURIComponent(str.replace(/\+/g,  " "));
    }

    function removeSafepage(str) {
        return str.match("&url=(.*)&cause=")[1];
    }

    input.oninput = function() {
        if (input.value) {
            try {
                // var no25 = input.value.replace("%25", "%")
                var no25 = input.value.replace(/%25/g, "%")
                var res = decodeHebUri(no25);
                result.innerHTML = res

                var withoutsafepage = removeSafepage(res)
                safepageRemoved.innerHTML = withoutsafepage
            }
            catch {
                result.innerHTML = "< error >"
                safepageRemoved.innerHTML = "< error >"
            }
            
            
        }
        else {
            result.innerHTML = "Results";
            safepageRemoved.innerHTML = "Results";
        }
      
    };
</script>
